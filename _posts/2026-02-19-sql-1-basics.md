---
layout: post
title: "SQL 입문 1강 - SQLite 기초와 CRUD"
description: "SQL 개념, SQLite 환경 구축, 테이블 생성, CRUD, ALTER TABLE, WHERE, 정렬과 집계 함수"
date: 2026-02-19
category: "SQL"
tags: sql, sqlite, crud, database
comments: true
---

## SQL이란?

SQL(Structured Query Language)은 관계형 데이터베이스를 관리하고 조작하기 위한 표준 언어이다. 데이터를 저장, 조회, 수정, 삭제하는 데 사용된다.

```sql
SELECT name, age FROM users WHERE age > 20;
-- "users 테이블에서 나이가 20 초과인 사람의 이름과 나이를 가져와라"
```

## SQLite 환경 구축

SQLite는 서버 없이 파일 하나(.db)로 동작하는 가벼운 데이터베이스이다.

- Mac에서는 `sqlite3`가 기본 내장
- **DB Browser for SQLite** 설치 (GUI 도구)
  - `brew install --cask db-browser-for-sqlite`
  - 또는 [sqlitebrowser.org](https://sqlitebrowser.org)에서 .dmg 다운로드
- VS Code: "SQLite Viewer" 확장 설치로 .db 파일 시각적 조회 가능
- Python: `import sqlite3`로 별도 설치 없이 사용 가능

> DB Browser에서 테이블을 만들기 전에 **반드시 "New Database"로 .db 파일을 먼저 생성**해야 한다.

---

## 테이블 생성 (CREATE TABLE)

```sql
CREATE TABLE 테이블명 (
    컬럼명1 데이터타입 제약조건,
    컬럼명2 데이터타입 제약조건,
    ...
);

-- 예시
CREATE TABLE Person (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL,
    Birthday TEXT
);

-- 이미 존재하면 생성하지 않기
CREATE TABLE IF NOT EXISTS Person (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Name TEXT NOT NULL,
    Birthday TEXT
);
```

### 데이터 타입

| 타입 | 설명 | 예시 |
|------|------|------|
| INTEGER | 정수 | 1, 42, -10 |
| TEXT | 문자열 | '홍길동', 'hello' |
| REAL | 실수(소수점) | 3.14, 99.9 |
| BLOB | 바이너리 데이터 | 이미지, 파일 등 |
| NULL | 값 없음 | NULL |

### 테이블 삭제

```sql
DROP TABLE 테이블명;
DROP TABLE IF EXISTS 테이블명;
```

---

## CRUD 문법

### 1. 추가 (INSERT)

```sql
-- 특정 컬럼에 값 넣기
INSERT INTO 테이블명 (컬럼1, 컬럼2) VALUES (값1, 값2);

-- 여러 행 한 번에 넣기
INSERT INTO Person (Name, Birthday) VALUES
  ('안태희','2001-02-10'),
  ('유진','2001-01-01'),
  ('최시원','2000-01-01'),
  ('김양원','2000-01-01');
```

### 2. 조회 (SELECT)

```sql
SELECT * FROM 테이블명;                     -- 전체 조회
SELECT 컬럼1, 컬럼2 FROM 테이블명;            -- 특정 컬럼만
SELECT * FROM 테이블명 WHERE 조건;            -- 조건부 조회
SELECT * FROM 테이블명 ORDER BY 컬럼 ASC;     -- 오름차순 정렬
SELECT * FROM 테이블명 ORDER BY 컬럼 DESC;    -- 내림차순 정렬
SELECT * FROM 테이블명 LIMIT 숫자;            -- 개수 제한
```

### 3. 갱신 (UPDATE)

```sql
UPDATE 테이블명 SET 컬럼1 = 값1 WHERE 조건;
UPDATE Person SET Name = '이영희', Birthday = '1995-03-20' WHERE ID = 2;
```

> **WHERE 없이 실행하면 모든 행이 수정된다!**

### 4. 삭제 (DELETE)

```sql
DELETE FROM 테이블명 WHERE 조건;
DELETE FROM Person WHERE ID = 3;
```

> **WHERE 없이 실행하면 모든 데이터가 삭제된다!**

### CRUD 한눈에 보기

| 작업 | 키워드 | 기본 구조 |
|------|--------|-----------|
| 추가 | INSERT INTO ... VALUES | `INSERT INTO 테이블 (컬럼) VALUES (값)` |
| 조회 | SELECT ... FROM | `SELECT 컬럼 FROM 테이블 WHERE 조건` |
| 갱신 | UPDATE ... SET | `UPDATE 테이블 SET 컬럼=값 WHERE 조건` |
| 삭제 | DELETE FROM | `DELETE FROM 테이블 WHERE 조건` |

---

## 컬럼 추가 / 삭제 (ALTER TABLE)

```sql
-- 컬럼 추가
ALTER TABLE 테이블명 ADD COLUMN 컬럼명 데이터타입;
ALTER TABLE Person ADD COLUMN Email TEXT;
ALTER TABLE Person ADD COLUMN Age INTEGER DEFAULT 0;

-- 컬럼 삭제 (SQLite 3.35.0 이상)
ALTER TABLE 테이블명 DROP COLUMN 컬럼명;

-- 컬럼 이름 변경 (SQLite 3.25.0 이상)
ALTER TABLE Person RENAME COLUMN Birthday TO BirthDate;
```

> NOT NULL로 컬럼 추가 시 반드시 DEFAULT 값을 함께 지정해야 한다.

---

## 제약조건 (Constraints)

| 제약조건 | 설명 | 예시 |
|----------|------|------|
| PRIMARY KEY | 행을 고유하게 식별하는 대표 키 | `ID INTEGER PRIMARY KEY` |
| AUTOINCREMENT | 자동 번호 매기기 | `ID INTEGER PRIMARY KEY AUTOINCREMENT` |
| NOT NULL | 빈 값(NULL) 허용 안 함 | `Name TEXT NOT NULL` |
| DEFAULT | 기본값 지정 | `Age INTEGER DEFAULT 20` |
| UNIQUE | 중복 값 허용 안 함 | `Email TEXT UNIQUE` |
| CHECK | 값의 범위 지정 | `Age INTEGER CHECK(Age >= 0)` |
| FOREIGN KEY | 다른 테이블의 값을 참조 | `FOREIGN KEY (PersonID) REFERENCES Person(ID)` |

---

## WHERE 조건문 연산자

### 비교 연산자

```sql
WHERE Age = 20       -- 같다
WHERE Age != 20      -- 같지 않다
WHERE Age > 20       -- 초과
WHERE Age >= 20      -- 이상
WHERE Age < 20       -- 미만
WHERE Age <= 20      -- 이하
```

### 논리 연산자

```sql
WHERE Age >= 20 AND Name = '홍길동'    -- 둘 다 만족
WHERE Age >= 20 OR Name = '홍길동'     -- 하나만 만족해도 OK
WHERE NOT Age = 20                     -- 반대
```

### 범위 / 목록 / 패턴

```sql
WHERE Age BETWEEN 20 AND 30              -- 20 이상 30 이하
WHERE Name IN ('홍길동', '김철수')         -- 이 중 하나면 OK
WHERE Name LIKE '김%'                     -- '김'으로 시작
WHERE Name LIKE '%수'                     -- '수'로 끝나는
WHERE Name LIKE '%길%'                    -- '길'이 포함된
WHERE Birthday IS NULL                    -- 빈 값인 행
WHERE Birthday IS NOT NULL                -- 값이 있는 행
```

---

## 정렬과 그룹

### ORDER BY - 정렬

```sql
SELECT * FROM Person ORDER BY Age ASC;     -- 오름차순
SELECT * FROM Person ORDER BY Age DESC;    -- 내림차순
```

### GROUP BY - 같은 값끼리 묶어서 집계

```sql
SELECT Age, COUNT(*) FROM Person GROUP BY Age;
```

### HAVING - 그룹에 조건 걸기

```sql
SELECT Age, COUNT(*) FROM Person GROUP BY Age HAVING COUNT(*) >= 2;
```

---

## 집계 함수

| 함수 | 뜻 | 예시 |
|------|-----|------|
| `COUNT(*)` | 개수 | `SELECT COUNT(*) FROM Person` |
| `SUM(컬럼)` | 합계 | `SELECT SUM(Score) FROM Student` |
| `AVG(컬럼)` | 평균 | `SELECT AVG(Age) FROM Person` |
| `MAX(컬럼)` | 최대값 | `SELECT MAX(Age) FROM Person` |
| `MIN(컬럼)` | 최소값 | `SELECT MIN(Age) FROM Person` |
